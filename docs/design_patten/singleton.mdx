---
slug: sigleton-design-pattern
title: ğŸ­ ì‹±ê¸€í†¤ ë””ìì¸ íŒ¨í„´
authors: [bundabergman]
tags: [design-pattern, creational]
---

## ì‹±ê¸€í†¤ ë””ìì¸ íŒ¨í„´

## ëª¨ë“ˆ ë ˆë²¨ ì‹±ê¸€í†¤ (ê°€ì¥ Pythonicí•œ ë°©ë²•)

- íŒŒì´ì¬ ëª¨ë“ˆì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤. ëª¨ë“ˆì€ í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ìµœì´ˆ import ì‹œ ë‹¨ í•œ ë²ˆë§Œ ë¡œë“œë˜ê³  ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

- ë”°ë¼ì„œ ëª¨ë“ˆ ìì²´ë¥¼ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ì²˜ëŸ¼ ì‚¬ìš©í•˜ê±°ë‚˜, ëª¨ë“ˆ ë‚´ì— í•„ìš”í•œ ê°ì²´ë‚˜ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ì´ë¥¼ ê³µìœ í•˜ëŠ” ë°©ì‹ì´ ê°€ì¥ ê°„ë‹¨í•˜ê³  íŒŒì´ì¬ë‹¤ìš´ ë°©ë²•ìœ¼ë¡œ ì—¬ê²¨ì§‘ë‹ˆë‹¤.

```python
# config.py (ëª¨ë“ˆ íŒŒì¼)
_db_connection = None # ì˜ˆì‹œ: DB ì—°ê²° ê°ì²´ (ì‹¤ì œë¡œëŠ” ì—°ê²° ë¡œì§ í•„ìš”)
_settings = {"theme": "dark", "version": "1.0"}

def get_db_connection():
    global _db_connection
    if _db_connection is None:
        print("Creating DB connection...")
        # ì‹¤ì œ DB ì—°ê²° ë¡œì§
        _db_connection = "Connected DB Object"
    return _db_connection

def get_setting(key):
    return _settings.get(key)

def update_setting(key, value):
    _settings[key] = value

# main.py (ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ íŒŒì¼) ########## ì—¬ê¸°ëŠ” ë‹¤ë¥¸ íŒŒì¼ ##########
import config # config ëª¨ë“ˆì„ ì„í¬íŠ¸

conn1 = config.get_db_connection()
conn2 = config.get_db_connection() # "Creating DB connection..."ì€ í•œ ë²ˆë§Œ ì¶œë ¥ë¨

print(f"conn1 is conn2: {conn1 is conn2}") # ì¶œë ¥: conn1 is conn2: True

print(config.get_setting("theme")) # ì¶œë ¥: dark
config.update_setting("theme", "light")
print(config.get_setting("theme")) # ì¶œë ¥: light
```

### ì‚¬ì‹¤ ë‹¤ë¥¸ íŒ¨í„´ì€ ì•Œí•„ìš” ì—†ì§€ë§Œ ê·¸ë˜ë„ í•œë²ˆ ì‘ì„±í•´ë´…ë‹ˆë‹¤.

## __new__ ë©”ì†Œë“œë¥¼ ì´ìš©í•œ ë°©ë²•

- í´ë˜ìŠ¤ì˜ __new__ ë©”ì†Œë“œëŠ” __init__ ë³´ë‹¤ ë¨¼ì € í˜¸ì¶œë˜ì–´ ê°ì²´ ìƒì„±ì„ ì œì–´í•©ë‹ˆë‹¤.

- í´ë˜ìŠ¤ ë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•˜ê³ , __new__ ë©”ì†Œë“œì—ì„œ ì¸ìŠ¤í„´ìŠ¤ê°€ ì´ë¯¸ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì—¬ ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.

```python
class SingletonClass:
    _instance = None

    def __new__(cls, *args, **kwargs):
        if cls._instance is None:
            print("Creating new instance")
            # ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (super() ì‚¬ìš©)
            cls._instance = super().__new__(cls)
            # ì—¬ê¸°ì„œ ì¶”ê°€ ì´ˆê¸°í™”ê°€ í•„ìš”í•˜ë©´ í•  ìˆ˜ ìˆì§€ë§Œ, __init__ì—ì„œ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
        else:
            print("Returning existing instance")
        return cls._instance

    def __init__(self, data):
        # __init__ì€ __new__ê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•  ë•Œë§ˆë‹¤ í˜¸ì¶œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜ í•„ìš”
        # ì•„ë˜ì²˜ëŸ¼ ì´ˆê¸°í™”ê°€ í•œ ë²ˆë§Œ ë˜ë„ë¡ ë°©ì–´ ì½”ë“œë¥¼ ë„£ëŠ” ê²½ìš°ê°€ ë§ìŒ
        if not hasattr(self, '_initialized'):
            print(f"Initializing instance with data: {data}")
            self.data = data
            self._initialized = True
        else:
            print(f"Instance already initialized (data: {self.data})")


# ì‚¬ìš© ì˜ˆì‹œ
s1 = SingletonClass("Data 1")
print(f"s1 data: {s1.data}")

s2 = SingletonClass("Data 2") # __new__ëŠ” ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, __init__ì€ ë˜ í˜¸ì¶œë¨
print(f"s2 data: {s2.data}") # ì¶œë ¥: s2 data: Data 1 (s1ê³¼ ê°™ì€ ê°ì²´ì´ë¯€ë¡œ dataê°€ ë°”ë€Œì§€ ì•ŠìŒ)

print(f"s1 is s2: {s1 is s2}") # ì¶œë ¥: s1 is s2: True
```